{"ast":null,"code":"const emojiOccurrences = {\n  '🌍': 3,\n  '🤔': 3,\n  '😂': 3,\n  '🔥': 3,\n  '🀄️': 3,\n  '🌛': 3,\n  '🐱': 3,\n  '🐶': 3,\n  '👊': 3,\n  '🐩': 3,\n  '🛁': 3,\n  '🥷': 3\n};\nconst gameItemsArr = generateGameItemsArr(emojiOccurrences);\nexport const itemsArr = level => {\n  // Game items generation logic here\n  let arr = [...gameItemsArr];\n  // 每层有多少item\n  const floorItemsArr = [9, 16, 25, 36, 49, 64, 81];\n  const floorNumsArr = [3, 4, 5, 6, 7, 8, 9];\n\n  // 每个等级有多少空item数组\n  const noItemsNum = [7, 14, 14, 24, 49, 40];\n  // 每个等级有多少item数组\n  const itemsNum = [18, 36, 72, 111, 150, 240];\n\n  // 空item数组\n  const noItemsArr = [];\n  let i = noItemsNum[level - 1];\n  while (i > 0) {\n    noItemsArr.push({\n      name: '',\n      color: '',\n      position: [null, null, null],\n      display: false\n    });\n    i--;\n  }\n\n  // 最后不完整的取几个\n  const getArrItems = itemsNum[level - 1] / 3 % 12 * 3;\n  const otherItemsArr = arr.map((i, index) => {\n    if (index < getArrItems) {\n      return i;\n    }\n    return null;\n  }).filter(i => i);\n  let itemsNumsArr = [];\n  if (level === 1) {\n    itemsNumsArr = otherItemsArr;\n  }\n  if (level === 2) {\n    itemsNumsArr = arr;\n  }\n  if (level === 3) {\n    itemsNumsArr = arr.concat(arr);\n  }\n  if (level === 4) {\n    arr = [...gameItemsArr];\n    itemsNumsArr = arr.concat(arr, arr, otherItemsArr);\n  }\n  if (level === 5) {\n    arr = [...gameItemsArr];\n    itemsNumsArr = arr.concat(arr, arr, arr, otherItemsArr);\n  }\n  if (level === 6) {\n    arr = [...gameItemsArr];\n    itemsNumsArr = arr.concat(arr, arr, arr, arr, arr, otherItemsArr);\n  }\n  const allItems = itemsNumsArr.concat(noItemsArr).sort(() => Math.random() - 0.5);\n  const resultArr = [];\n  floorItemsArr.splice(0, level + 1).map((item, fIndex) => {\n    resultArr.push(allItems.splice(0, item));\n  });\n  const zIndex = [6, 5, 4, 3, 2, 1];\n  return resultArr.map((item, index) => {\n    return {\n      arr: [...item.map((i, j) => {\n        i.position = [index + 1, parseInt(j / floorNumsArr[index]) + 1, (j + 1) % floorNumsArr[index] || floorNumsArr[index]];\n        return {\n          ...i\n        };\n      })],\n      zIndex: zIndex[index],\n      width: (index + 3) * 55\n    };\n  });\n};\nexport const isItemCanClick = (item, allItems) => {\n  var _allItems;\n  // Clickability logic here\n  const nowItem = {\n    ...item\n  };\n  const nowItemFloor = nowItem.position[0];\n  // 最底下层不判断\n  // if (nowItemFloor === allItems.length) return;\n\n  const upFloor = ((_allItems = allItems[nowItemFloor - 2]) === null || _allItems === void 0 ? void 0 : _allItems.arr.filter(itemNow => itemNow.name !== '')) || [];\n  if (upFloor.length === 0) return true;\n  let midArr = [];\n  upFloor.map(itemNowM => {\n    const position = itemNowM.position;\n    const a = [position[0] + 1, position[1], position[2]];\n    const b = [position[0] + 1, position[1], position[2] + 1];\n    const c = [position[0] + 1, position[1] + 1, position[2]];\n    const d = [position[0] + 1, position[1] + 1, position[2] + 1];\n    midArr.push(a);\n    midArr.push(b);\n    midArr.push(c);\n    midArr.push(d);\n  });\n  const isCanClick = midArr.filter(mItem => nowItem.position[0] === mItem[0] && nowItem.position[1] === mItem[1] && nowItem.position[2] === mItem[2]).length === 0;\n  return isCanClick;\n};\nconst generateGameItemsArr = emojiOccurrences => {\n  const emojiList = Object.keys(emojiOccurrences);\n  const gameItemsArr = [];\n  emojiList.forEach(emoji => {\n    const color = '#' + Math.floor(Math.random() * 16777215).toString(16);\n    for (let i = 0; i < emojiOccurrences[emoji]; i++) {\n      gameItemsArr.push({\n        name: emoji,\n        color,\n        position: [null, null, null],\n        display: false\n      });\n    }\n  });\n  return gameItemsArr;\n};","map":{"version":3,"names":["emojiOccurrences","gameItemsArr","generateGameItemsArr","itemsArr","level","arr","floorItemsArr","floorNumsArr","noItemsNum","itemsNum","noItemsArr","i","push","name","color","position","display","getArrItems","otherItemsArr","map","index","filter","itemsNumsArr","concat","allItems","sort","Math","random","resultArr","splice","item","fIndex","zIndex","j","parseInt","width","isItemCanClick","nowItem","nowItemFloor","upFloor","itemNow","length","midArr","itemNowM","a","b","c","d","isCanClick","mItem","emojiList","Object","keys","forEach","emoji","floor","toString"],"sources":["/Users/fenggao/Documents/FrontEndProject/EmojiExplorer/src/helpers/gameHelpers.js"],"sourcesContent":["\nconst emojiOccurrences = {\n    '🌍': 3,\n    '🤔': 3,\n    '😂': 3,\n    '🔥': 3,\n    '🀄️': 3,\n    '🌛': 3,\n    '🐱': 3,\n    '🐶': 3,\n    '👊': 3,\n    '🐩': 3,\n    '🛁': 3,\n    '🥷': 3,\n  };\nconst gameItemsArr = generateGameItemsArr(emojiOccurrences);\n\nexport const itemsArr = (level) => {\n    // Game items generation logic here\n        let arr = [...gameItemsArr];\n        // 每层有多少item\n        const floorItemsArr = [9, 16, 25, 36, 49, 64, 81];\n        const floorNumsArr = [3, 4, 5, 6, 7, 8, 9];\n      \n        // 每个等级有多少空item数组\n        const noItemsNum = [7, 14, 14, 24, 49, 40];\n        // 每个等级有多少item数组\n        const itemsNum = [18, 36, 72, 111, 150, 240];\n      \n        // 空item数组\n        const noItemsArr = [];\n        let i = noItemsNum[level - 1];\n        while (i > 0) {\n            noItemsArr.push({name: '', color: '', position: [null, null, null], display: false});\n            i--;\n        }\n      \n        // 最后不完整的取几个\n        const getArrItems = ((itemsNum[level - 1] / 3) % 12) * 3;\n        const otherItemsArr = arr\n            .map((i, index) => {\n                if (index < getArrItems) {\n                    return i;\n                }\n                return null;\n            })\n            .filter((i) => i);\n        let itemsNumsArr = [];\n        if (level === 1) {\n            itemsNumsArr = otherItemsArr;\n        }\n        if (level === 2) {\n            itemsNumsArr = arr;\n        }\n        if (level === 3) {\n            itemsNumsArr = arr.concat(arr);\n        }\n        if (level === 4) {\n            arr = [...gameItemsArr];\n            itemsNumsArr = arr.concat(arr, arr, otherItemsArr);\n        }\n        if (level === 5) {\n            arr = [...gameItemsArr];\n            itemsNumsArr = arr.concat(arr, arr, arr, otherItemsArr);\n        }\n        if (level === 6) {\n            arr = [...gameItemsArr];\n            itemsNumsArr = arr.concat(arr, arr, arr, arr, arr, otherItemsArr);\n        }\n      \n        const allItems = itemsNumsArr.concat(noItemsArr).sort(() => Math.random() - 0.5);\n      \n        const resultArr = [];\n      \n        floorItemsArr.splice(0, level + 1).map((item, fIndex) => {\n            resultArr.push(allItems.splice(0, item));\n        });\n      \n      \n        const zIndex = [6, 5, 4, 3, 2, 1];\n        return resultArr.map((item, index) => {\n            return {\n                arr: [\n                    ...item.map((i, j) => {\n                        i.position = [index + 1, parseInt(j / floorNumsArr[index]) + 1, (j + 1) % floorNumsArr[index] || floorNumsArr[index]];\n                        return {...i};\n                    }),\n                ],\n                zIndex: zIndex[index],\n                width: (index + 3) * 55,\n            };\n        });\n};\n  \nexport const isItemCanClick = (item, allItems) => {\n    // Clickability logic here\n    const nowItem = {...item};\n    const nowItemFloor = nowItem.position[0];\n    // 最底下层不判断\n    // if (nowItemFloor === allItems.length) return;\n  \n    const upFloor = allItems[nowItemFloor - 2]?.arr.filter((itemNow) => itemNow.name !== '') || [];\n  \n    if (upFloor.length === 0) return true;\n    let midArr = [];\n    upFloor.map((itemNowM) => {\n        const position = itemNowM.position;\n        const a = [position[0] + 1, position[1], position[2]];\n        const b = [position[0] + 1, position[1], position[2] + 1];\n        const c = [position[0] + 1, position[1] + 1, position[2]];\n        const d = [position[0] + 1, position[1] + 1, position[2] + 1];\n        midArr.push(a);\n        midArr.push(b);\n        midArr.push(c);\n        midArr.push(d);\n    });\n  \n    const isCanClick =\n        midArr.filter((mItem) => nowItem.position[0] === mItem[0] && nowItem.position[1] === mItem[1] && nowItem.position[2] === mItem[2])\n            .length === 0;\n  \n    return isCanClick;\n};\n\nconst generateGameItemsArr = (emojiOccurrences) => {\n    const emojiList = Object.keys(emojiOccurrences);\n    const gameItemsArr = [];\n  \n    emojiList.forEach((emoji) => {\n      const color = '#' + Math.floor(Math.random() * 16777215).toString(16);\n      for (let i = 0; i < emojiOccurrences[emoji]; i++) {\n        gameItemsArr.push({ name: emoji, color, position: [null, null, null], display: false });\n      }\n    });\n  \n    return gameItemsArr;\n};\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}